!function(e,t){"use strict";var i=null;i=function(){this.oApplyTo=null,this.oBackupApplyTo=null,this.oTarget=null,this.oClasses="more",this.oTexts="View more",this.nWords=0,this.nWordsCounter=0,this.oViewMore=null,this.oSerialized={},this.oDocumentFragment=t.createDocumentFragment(),this.bTest=!1,this.nIdTest=0,this.bNeedViewMore=!1,this.bNotViewMore=!1},i.prototype.applyTo=function(e){return e?(this.oApplyTo=e,this.oBackupApplyTo=e.cloneNode(!0),this):this},i.prototype.setTarget=function(e){return e?(this.oTarget=e,this):this},i.prototype.setClasses=function(e){return e?(this.oClasses=e,this):this},i.prototype.setText=function(e){return e?(this.oTexts=e,this):this},i.prototype.setWords=function(e){return e?(this.nWords=e-1,this):this},i.prototype.trim=function(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")},i.prototype.countWords=function(e){return this.trim(e).split(" ").length},i.prototype.getOnlyNumberOfWords=function(e,t){return this.trim(e).split(" ").splice(0,t).join(" ")},i.prototype.createViewMore=function(){var e=t.createElement("a");e.className=this.oClasses,e.title=this.oTexts,e.innerHTML=this.oTexts,this.oViewMore=e},i.prototype.getFirstElementOfObject=function(e){var t=null,i="";for(i in e)if(e.hasOwnProperty(i)){t=e[i];break}return t},i.prototype.deserializeObject=function(e,i){var n=null,o="";if(1===e.nodeType){if(n=t.createElement(e.tagName),"undefined"!=typeof e.attributes)for(o in e.attributes)e.attributes.hasOwnProperty(o)&&n.setAttribute(o,e.attributes[o]);i.appendChild(n)}else 3===e.nodeType&&(n="undefined"!=typeof e.textContent?t.createTextNode(e.textContent):e.data?t.createTextNode(e.data):t.createTextNode(e.innerText),i.appendChild(n));"undefined"!=typeof e.childNodes&&this.loopOnDeserialize(e.childNodes,n)},i.prototype.loopOnDeserialize=function(e,t){var i="";for(i in e)e.hasOwnProperty(i)&&this.deserializeObject(e[i],t)},i.prototype.deserializeSerializedObject=function(e,i){var n=!1,o=null;"undefined"==typeof e&&(e=this.getFirstElementOfObject(this.oSerialized),this.oDocumentFragment=t.createDocumentFragment(),n=!0),"undefined"==typeof i&&(o=t.createElement("div"),this.oDocumentFragment.appendChild(o),i=o),this.deserializeObject(e,i),"undefined"!=typeof e.childNodes&&this.loopOnDeserialize(e.childNodes,i)},i.prototype.serializeDomObject=function(e,i){var n=15412457562*Math.random(),o=null,s=[],r=null,d=0,a=0,l=0,h=0,f=e.childNodes.length;if(this.bTest&&(n="__"+(this.nIdTest+=1)+"__"),this.nWordsCounter<=this.nWords){if(o={},o.nodeType=e.nodeType,"undefined"!=typeof e.tagName&&(o.tagName=e.tagName.toLowerCase()),s=e.attributes)for(o.attributes={},a=s.length;a>d;d+=1)r=s[d],r.nodeValue&&(o.attributes[r.name]=r.value);if(3===o.nodeType&&(l=this.nWordsCounter,"undefined"!=typeof e.textContent?this.nWordsCounter+=this.countWords(this.trim(e.textContent)):e.data?this.nWordsCounter+=this.countWords(this.trim(e.data)):this.nWordsCounter+=this.countWords(this.trim(e.innerText)),this.nWordsCounter<=this.nWords?"undefined"!=typeof e.textContent?o.textContent=e.textContent:e.data?o.innerText=e.data:o.innerText=e.innerText:(this.bNeedViewMore=!0,l<this.nWords&&this.nWordsCounter>this.nWords?"undefined"!=typeof e.textContent?o.textContent=this.getOnlyNumberOfWords(e.textContent,this.nWords-l):e.data?o.innerText=this.getOnlyNumberOfWords(e.data,this.nWords-l):o.innerText=this.getOnlyNumberOfWords(e.innerText,this.nWords-l):t.body.textContent?o.textContent="":o.innerText="")),e.hasChildNodes())for(o.childNodes={},h=0,f=e.childNodes.length;f>h;h+=1)this.serializeDomObject(e.childNodes[h],o.childNodes);"undefined"==typeof i?this.oSerialized[n]=o:i[n]=o}},i.prototype.addEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},i.prototype.setBehaviour=function(){var e=this;this.addEvent(this.oViewMore,"click",function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,e.showAll(),!1})},i.prototype.showAll=function(){var e=this.oTarget,t=e.parentNode;t.insertBefore(this.oBackupApplyTo,e),t.removeChild(e)},i.prototype.init=function(){this.serializeDomObject(this.oApplyTo),this.deserializeSerializedObject();var e=this.oDocumentFragment.childNodes[0];e.removeChild(this.oDocumentFragment.childNodes[0].childNodes[0]),this.oTarget.innerHTML="",this.createViewMore(),this.bNeedViewMore&&!this.bNotViewMore&&("P"==e.lastChild.nodeName?e.lastChild.appendChild(t.createTextNode("...")):e.appendChild(t.createTextNode("...")),e.appendChild(t.createElement("br")),e.appendChild(this.oViewMore),this.setBehaviour()),this.oTarget.appendChild(this.oDocumentFragment)},i.run=function(e,t,n,o){var s=new i;s.applyTo(e).setTarget(t).setWords(n),"undefined"!=typeof o&&("undefined"!=typeof o.viewMoreText&&s.setText(o.viewMoreText),"undefined"!=typeof o["class"]&&s.setClasses(o["class"])),s.init()},e.Cutter=i}(window,document);